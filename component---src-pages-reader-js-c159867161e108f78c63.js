(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{130:function(e,t,n){"use strict";n.r(t);n(33);var a=n(0),r=n.n(a),i=n(6),o=n.n(i),u=(n(74),function(e){var t=e.value;return r.a.createElement("blockquote",null,t)}),s=n(133),l=s.a.span.withConfig({displayName:"Tag",componentId:"sc-1i2ekkz-0"})(["display:inline-block;padding-right:.6em;padding-left:.6em;margin-right:.25rem;font-family:sans-serif;font-size:75%;color:#4caa8a;"]),c=function(e){var t=e.type;e.value;return r.a.createElement(l,null,"#",t)},d=function(e){var t=e.type,n=e.value;return r.a.createElement("dl",null,r.a.createElement("dt",null,t),r.a.createElement("dd",null,n))},m=function(e){var t=e.type,n=e.value;return r.a.createElement("div",null,r.a.createElement("strong",null,t),r.a.createElement("ul",null,n.map(function(e){return r.a.createElement("li",{key:e},e)})))},f=s.a.a.withConfig({displayName:"Link",componentId:"sc-1pljiq7-0"})(["display:block;padding:.5em 0em .5em 0em;"]),p=function(e){var t=e.value;return r.a.createElement(f,{href:t},t)},h=s.a.a.withConfig({displayName:"Bible",componentId:"sc-126oe2p-0"})(["display:block;padding:.5em 0em .5em 0em;"]),g={tag:c,comment:u,recipe:u,link:p,"podcast episode":function(e){var t=e.value;return r.a.createElement("audio",{controls:"controls",preload:"none"},r.a.createElement("source",{src:t}))},"bible passage":function(e){var t=e.value,n="https://www.biblegateway.com/passage/?version=NRSV&search="+t;return r.a.createElement(h,{href:n},t)},emoji:function(e){var t=e.value;return r.a.createElement("span",null,t)}},v=function(){function e(){}return e.find=function(e,t){var n=e.toLowerCase();return g.hasOwnProperty(n)?g[n]:"boolean"==typeof t?c:Array.isArray(t)?m:"string"==typeof t&&0===t.indexOf("http")?p:d},e}(),y=function(e){var t=e.type,n=e.value,a=v.find(t,n);return r.a.createElement(a,{type:t,value:n})},E=function(e){var t=e.fields;return r.a.createElement("div",null,t.map(function(e){return r.a.createElement(y,{key:e.type,type:e.type,value:e.value})}))},w=s.a.div.withConfig({displayName:"GuestSummary",componentId:"sc-71nr88-0"})(["display:inline-block;padding-right:.6em;padding-left:.6em;margin-right:.25rem;font-family:sans-serif;font-size:75%;color:#4caa8a;"]),b=function(e){var t=e.guestCount;return 1===t?r.a.createElement(w,null,"One guest"):t>1?r.a.createElement(w,null,t," guests"):r.a.createElement("div",null)},L=n(131),k=n.n(L),I=s.a.div.withConfig({displayName:"Truffle",componentId:"sc-18f665r-0"})(["border-radius:.25rem;margin:1rem;padding:1rem;border:1px solid #e9ecef;"]),C=function(e){var t=e.id,n=e.timestamp,a=(e.hostId,e.fields),i=e.guests;return r.a.createElement(I,null,r.a.createElement(k.a,{to:"/reader/#/"+t},function(e){return new Date(e).toDateString()}(n)),r.a.createElement(E,{fields:a}),r.a.createElement(b,{guestCount:i.length}))},T=(n(75),n(47),n(78),n(159),function(){function e(){this.masterList=new Map,this.hostIdList=[],this.guestList=new Map}var t=e.prototype;return t.parse=function(e){var t=this;e.map(function(e){return t.processTruffle(e)})},t.processTruffle=function(e){this.masterList.set(e.id,e),this.isGuest(e)?this.addToGuestList(e):this.hostIdList.push(e.id)},t.isGuest=function(e){return e.hasOwnProperty("hostId")},t.addToGuestList=function(e){var t=this.guestList.get(e.hostId)||[];t.push(e.id),this.guestList.set(e.hostId,t)},t.getGuests=function(e){var t=this;return(this.guestList.get(e.id)||[]).map(function(e){return t.masterList.get(e)})},e}()),j=function(e){var t=[],n=[];for(var a in e)"id"!==a&&"hostId"!==a&&"timestamp"!==a&&("boolean"==typeof e[a]?n.push({type:a,value:e[a]}):t.push({type:a,value:e[a]}));return t.concat(n)},x=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={error:null,isLoaded:!1,truffleRepo:null},n}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;fetch("/feed.json").then(function(e){return e.json()}).then(function(e){var t=new T;return t.parse(e),t}).then(function(t){e.setState({isLoaded:!0,truffleRepo:t})},function(t){e.setState({isLoaded:!0,error:t})})},n.render=function(){var e=this.state,t=e.error,n=e.isLoaded,a=e.truffleRepo;return t?r.a.createElement("div",null,"Error: ",t.message):n?r.a.createElement("div",null,a.hostIdList.map(function(e){var t=a.masterList.get(e);return r.a.createElement(C,{key:t.id,id:t.id,hostId:t.hostId,timestamp:t.timestamp,fields:j(t),guests:a.getGuests(t)})})):r.a.createElement("div",null,"Loading...")},t}(r.a.Component),G=function(e){var t=e.guests;return t.length>0?r.a.createElement("div",null,r.a.createElement("h2",null,"Guests"),t.map(function(e){return r.a.createElement(C,{key:e.id,id:e.id,hostId:e.hostId,timestamp:e.timestamp,fields:j(e),guests:[]})})):r.a.createElement("div",null)},R=Object(s.a)(k.a).withConfig({displayName:"SingleTruffle__BackLink",componentId:"sc-1jyj5ja-0"})(["text-decoration:none;"]),S=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={error:null,isLoaded:!1,truffleRepo:null,id:t.id},n}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;fetch("/feed.json").then(function(e){return e.json()}).then(function(e){var t=new T;return t.parse(e),t}).then(function(t){e.setState({isLoaded:!0,truffleRepo:t})},function(t){e.setState({isLoaded:!0,error:t})})},n.render=function(){var e=this.state,t=e.error,n=e.isLoaded,a=e.truffleRepo,i=e.id;if(t)return r.a.createElement("div",null,"Error: ",t.message);if(n){var o=a.masterList.get(i),u=a.getGuests(o);return r.a.createElement("div",null,r.a.createElement(C,{key:o.id,id:o.id,hostId:o.hostId,timestamp:o.timestamp,fields:j(o),guests:[]}),r.a.createElement(G,{guests:u}),r.a.createElement(R,{to:"/reader/"},"ðŸ”™ return to list"))}return r.a.createElement("div",null,"Loading...")},t}(r.a.Component),q=n(136);t.default=function(e){var t=e.location.hash;return""===t||"#/"===t?r.a.createElement(q.a,null,r.a.createElement(x,null)):r.a.createElement(q.a,null,r.a.createElement(S,{id:t.replace(/#\//,"")}))}},132:function(e,t,n){var a;e.exports=(a=n(134))&&a.default||a},134:function(e,t,n){"use strict";n.r(t);n(29);var a=n(0),r=n.n(a),i=n(4),o=n.n(i),u=n(45),s=n(2),l=function(e){var t=e.location,n=s.default.getResourcesForPathnameSync(t.pathname);return r.a.createElement(u.a,Object.assign({location:t,pageResources:n},n.json))};l.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},t.default=l},135:function(e,t,n){},136:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(137),o=n.n(i),u=n(131),s=n.n(u),l=function(){return r.a.createElement("div",{style:{background:"rebeccapurple",marginBottom:"1.45rem"}},r.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"1.45rem 1.0875rem"}},r.a.createElement("h1",{style:{margin:0}},r.a.createElement(s.a,{to:"/",style:{color:"white",textDecoration:"none"}},"Truffle"))))};n(135),t.a=function(e){var t=e.children;return r.a.createElement("div",null,r.a.createElement(o.a,{title:"Truffle",meta:[{name:"description",content:"hosted conversations open to interpretation"},{name:"keywords",content:"publishing, JSON, social networking"}]}),r.a.createElement(l,null),r.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},t))}},138:function(e,t,n){"use strict";n.r(t),n.d(t,"graphql",function(){return p}),n.d(t,"StaticQueryContext",function(){return m}),n.d(t,"StaticQuery",function(){return f});var a=n(0),r=n.n(a),i=n(4),o=n.n(i),u=n(131),s=n.n(u);n.d(t,"Link",function(){return s.a}),n.d(t,"withPrefix",function(){return u.withPrefix}),n.d(t,"navigate",function(){return u.navigate}),n.d(t,"push",function(){return u.push}),n.d(t,"replace",function(){return u.replace}),n.d(t,"navigateTo",function(){return u.navigateTo});var l=n(132),c=n.n(l);n.d(t,"PageRenderer",function(){return c.a});var d=n(28);n.d(t,"parsePath",function(){return d.a});var m=r.a.createContext({}),f=function(e){return r.a.createElement(m.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};function p(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}f.propTypes={data:o.a.object,query:o.a.string.isRequired,render:o.a.func,children:o.a.func}}}]);
//# sourceMappingURL=component---src-pages-reader-js-c159867161e108f78c63.js.map